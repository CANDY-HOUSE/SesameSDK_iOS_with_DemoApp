# iOS

```Swift
public protocol CHSesame2: SesameLock {           
    var delegate: CHSesame2Delegate? { get set } // このメソッドを使用するとCHSesame2Status/CHSesame2MechStatus/CHSesame2Historyの変化があればSesameSDKがアプリUIにイベントを送る
    var mechSetting: CHSesame2MechSettings? { get }   // セサミの解錠・施錠の角度など
    var deviceShadowStatus: CHSesame2ShadowStatus? { get }
    var intention: CHSesame2Intention { get }       // locking：現在締めようとしている途中 ; unlocking：現在開けようとしている途中

    func lock(historytag:Data? = nill, result: @escaping (CHResult<CHEmpty>))  // 施錠する
    func unlock(historytag:Data? = nill,result: @escaping (CHResult<CHEmpty>)) // 解錠する
    func toggle(historytag:Data? = nill,result: @escaping (CHResult<CHEmpty>)) // 解錠状態の場合は施錠する、施錠状態の場合は解錠する
    func configureLockPosition(historytag:Data? = nill,lockTarget: Int16, unlockTarget: Int16,result: @escaping (CHResult<CHEmpty>))
    // 施解錠の回転位置を設定する。範圍： -32767~0~32767 ; -32768 は意義のないデフォルト值。 例0˚ ⇄ 0 で 360˚ ⇄ 1024 

    func getAutolockSetting(result: @escaping (CHResult<Int>))                                 // オートロック機能の設定状態を取得
    func enableAutolock(historytag:Data? = nill,delay: Int, result: @escaping (CHResult<Int>)) // オートロック機能の秒数を入力しオンにする ; delay: オートロック機能の秒数
    func disableAutolock(historytag:Data? = nill,result: @escaping (CHResult<Int>))            // オートロック機能をオフ
    func getHistories(page: UInt, _ result: @escaping CHResult<[CHSesame2History]>) // SesameSDK経由で新→旧との順番で履歴を取得する。 page:ページ数。0ページから始まり、履歴が新→旧の順番で、1ページの中に最多50件の履歴が入ってる。
    func getBleAdvParameter(_ result: @escaping CHResult<Sesame2BleAdvParameterResponse>) // セサミデバイスが発信しているBluetooth Advertising の Interval と TXPower の設定値を取得する。
    func updateBleAdvParameter(historytag:Data? = nill,interval: Double, txPower: Int8,
                               _ result: @escaping CHResult<Sesame2BleAdvParameterResponse>) 
    /* セサミデバイスが発信しているBluetooth Advertising の Interval と TXPower を調整する。
      intervalには20ms～10240msまで設定可能ですが、次のいずれかの値の設定がアップル社のAccessory Design Guidelines for Apple Devices 35.5 Advertising Intervalにて推奨されています: [1285.0, 1022.5, 852.5, 760.0, 546.25, 417.5, 318.75, 211.25, 152.5, 20.0] 単位: ms
      txPowerには次のいずれかの値が設定可能。 [4, 3, 0, -4, -8, -12, -16, -20, -40] 単位: dBm
    */
}
```

# Android

```kotlin
public interface CHSesame2 {
    var delegate: CHSesame2Delegate?
    var deviceShadowStatus: CHSesame2ShadowStatus?
    var mechSetting: CHSesame2MechSettings?
    var intention: CHSesame2Intention

    fun lock(historytag: ByteArray? = null, result: CHResult<CHEmpty>)
    fun unlock(historytag: ByteArray? = null, result: CHResult<CHEmpty>)
    fun toggle(historytag: ByteArray? = null, result: CHResult<CHEmpty>)
    fun configureLockPosition(lockTarget: Short, unlockTarget: Short, historytag: ByteArray? = null, result: CHResult<CHEmpty>)
    fun getAutolockSetting(result: CHResult<UShort>)
    fun enableAutolock(delay: Int, historytag: ByteArray? = null, result: CHResult<UShort>)
    fun disableAutolock(historytag: ByteArray? = null, result: CHResult<UShort>)
    fun getHistories(page: Int, result: CHResult<List<CHSesame2History>>)
    fun getBleAdvParameter(result: CHResult<CHSesame2BleAdvParameter>)
    fun updateBleAdvParameter(interval: Double, txPower: Byte, historytag: ByteArray? = null, result: CHResult<CHSesame2BleAdvParameter>)
}
```
