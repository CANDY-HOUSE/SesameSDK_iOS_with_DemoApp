# iOS
```swift
public protocol CHDevice : AnyObject {
    var rssi: NSNumber? { get }    // iOS/Androidが受信しているセサミデバイスのBluetooth Advertisement信号強度、単位: dBm
    var deviceId: UUID! { get }    // 各セサミデバイスの一意識別子UUIDで、 セサミデバイスがリセットされて再度登録し直されても、ファームウェアがアップデートされても、このUUIDが永遠に変わらない
    var isRegistered: Bool { get } // 既に登録済みか否か
    var txPowerLevel: Int? { get } // セサミデバイスが発信しているBluetooth Advertising信号強度、単位: dBm
    var productModel: CHProductModel { get }
    var deviceStatus: CHSesame2Status { get } // BLE接続状況：セサミ発見->接続中->認証済->接続成功など

    func getKey() -> CHDeviceKey? // SesameSDKの内部データベースに保存されてるこのセサミデバイスの 「Base64 encodedされた 鍵」 を取り出す
    func connect(result: @escaping (CHResult<CHEmpty>)) // このセサミデバイスとアプリとの間のBluetooth接続を築く
    func dropKey(result: @escaping (CHResult<CHEmpty>)) // SesameSDKの内部データベースに保存されてるこのセサミデバイスの鍵を破棄するだけ。再度何処かから同じ鍵を取ってこれば再度使える状態になる。
    func disconnect(result: @escaping (CHResult<CHEmpty>))
    /* disconnect() や disConnectAll()を叩かないと、
      アプリをバックグラウンドに送った時にセサミデバイスとアプリとの間のBluetooth接続がされたのままなので、セサミデバイスとWidgetとの間のBluetooth接続に切り替えできない。
      また同様に、Widgetをバックグラウンドに送った時に、セサミデバイスとアプリとの間のBluetooth接続への切り替えもできない。
    */    
    func getVersionTag(result: @escaping (CHResult<String>)) //セサミデバイスのファームウェアのバージョンを取得。version + "-" + 「6-digit git commit number」 例: 2.0.1-abcdef
    func updateFirmware(result: @escaping CHResult<CBPeripheral?>)
    func reset(result: @escaping CHResult<CHEmpty>)
    /* CANDY HOUSEのサーバーと関係なく、セサミデバイスと接続済であれば使える。
      セサミデバイスを初期化（リセット）し、そしてSesameSDKの内部データベースに保存されてるこのセサミデバイスの鍵を破棄する。
      何処かから同じ鍵を取って来ても再度使えない。再度セサミデバイスを使用したい場合、ユーザーは新規登録にて再度新たなセサミデバイスの鍵を作成する必要がある。
    */
    func register(result: @escaping CHResult<CHEmpty>)  // CANDY HOUSEサーバーへこのセサミデバイスを登録する
    func createGuestKey(result: @escaping CHResult<String>)
    func getGuestKeys(result: @escaping CHResult<[CHGuestKey]>)
    func removeGuestKey(_ guestKeyId: String, result: @escaping CHResult<CHEmpty>)
    func updateGuestKey(_ guestKeyId: String, name: String, result: @escaping CHResult<CHEmpty>)
}
```
# Android
```kotlin
interface CHDevices {
    var deviceStatus: CHSesame2Status
    var rssi: Int?
    val txPowerLevel: Int?
    var deviceId: UUID?
    var isRegistered: Boolean
    var productModel: CHProductModel

    fun connect(result: CHResult<CHEmpty>)
    fun disconnect(result: CHResult<CHEmpty>)
    fun getKey(): CHDevice
    fun dropKey(result: CHResult<CHEmpty>)
    fun getVersionTag(result: CHResult<String>)
    fun register(result: CHResult<CHEmpty>)
    fun reset(result: CHResult<CHEmpty>)
    fun updateFirmware(onResponse: CHResult<BluetoothDevice>)
    fun createGuestKey(keyName: String, result: CHResult<CHDevice>)
    fun getGuestKeys(result: CHResult<Array<CHGuestKeyCut>>)
    fun removeGuestKey(guestKeyId: String, result: CHResult<CHEmpty>)
    fun updateGuestKey(guestKeyId: String, name: String, result: CHResult<CHEmpty>)
}
```
